<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Kasir Toko</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .product-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); }
        .receipt-item:hover { background-color: #f8fafc; }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto p-4">
        <header class="flex justify-between items-center mb-8">
            <div>
                <h1 class="text-3xl font-bold text-blue-600">Kasir Toko Mart</h1>
                <p class="text-gray-500">Sistem Pembayaran Terintegrasi</p>
            </div>
            <div class="flex items-center space-x-4">
                <div class="text-right">
                    <p class="font-medium">Kasir: <span class="text-blue-600">Budi Santoso</span></p>
                    <p class="text-sm text-gray-500" id="currentDateTime"></p>
                </div>
                <div class="w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center">
                    <img src="https://placehold.co/48" alt="Foto profil kasir" class="rounded-full">
                </div>
            </div>
        </header>

        <div class="flex flex-col lg:flex-row gap-6">
            <div class="flex-1 bg-white rounded-lg shadow p-6">
                <h2 class="text-xl font-semibold mb-6">Daftar Produk</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    <div class="product-card bg-white border rounded-lg overflow-hidden transition duration-300 cursor-pointer">
                        <div class="p-3">
                            <h3 class="font-medium truncate">Indomie Goreng Spesial</h3>
                            <p class="font-bold text-blue-600">Rp 3.500</p>
                            <button class="bg-blue-600 text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-blue-700"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                    <div class="product-card bg-white border rounded-lg overflow-hidden transition duration-300 cursor-pointer">
                        <div class="p-3">
                            <h3 class="font-medium truncate">Aqua Botol 600ml</h3>
                            <p class="font-bold text-blue-600">Rp 5.000</p>
                            <button class="bg-blue-600 text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-blue-700"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="w-full lg:w-1/3">
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <h2 class="text-xl font-semibold">Struk Pembayaran</h2>
                    <div id="receiptItems"></div>
                    <div class="mt-6 pt-4 border-t">
                        <div class="flex justify-between mb-2">
                            <p>Subtotal</p>
                            <p id="subtotal" class="font-semibold">Rp 0</p>
                        </div>
                        <div class="flex justify-between mb-4 font-bold text-lg">
                            <p>Total</p>
                            <p id="total">Rp 0</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <label class="block text-sm font-medium mb-1">Jumlah Bayar</label>
                    <input id="bayar" type="number" class="w-full border rounded-lg mb-4" placeholder="0">
                    <div class="flex justify-between mb-1">
                        <p>Kembalian</p>
                        <p id="kembalian" class="font-semibold text-blue-600">Rp 0</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric', hour: 'numeric', minute: 'numeric' };
            document.getElementById('currentDateTime').textContent = now.toLocaleDateString('id-ID', options);
        }
        updateDateTime();
        setInterval(updateDateTime, 60000);

        let receipt = [];
        function renderReceipt() {
            const receiptItems = document.getElementById('receiptItems');
            receiptItems.innerHTML = '';
            let subtotal = 0;
            receipt.forEach((item, index) => {
                subtotal += item.price * item.qty;
                receiptItems.innerHTML += `
                    <div class="receipt-item flex justify-between items-start py-2 border-b">
                        <div>
                            <p class="font-medium">${item.name}</p>
                            <p class="text-sm text-gray-500">Rp ${item.price.toLocaleString()} x ${item.qty}</p>
                        </div>
                        <div class="flex items-center space-x-3">
                            <p class="font-semibold">Rp ${(item.price * item.qty).toLocaleString()}</p>
                            <button class="text-red-500" onclick="removeItem(${index})"><i class="fas fa-times"></i></button>
                        </div>
                    </div>`;
            });
            document.getElementById('subtotal').textContent = `Rp ${subtotal.toLocaleString()}`;
            document.getElementById('total').textContent = `Rp ${subtotal.toLocaleString()}`;
            calculateChange();
        }
        function addToReceipt(name, price) {
            const existing = receipt.find(item => item.name === name);
            if (existing) {
                existing.qty++;
            } else {
                receipt.push({ name, price, qty: 1 });
            }
            renderReceipt();
        }
        function removeItem(index) {
            receipt.splice(index, 1);
            renderReceipt();
        }
        function calculateChange() {
            const bayar = parseInt(document.getElementById('bayar').value) || 0;
            const total = parseInt(document.getElementById('total').textContent.replace(/Rp |\./g, '')) || 0;
            document.getElementById('kembalian').textContent = `Rp ${(bayar - total).toLocaleString()}`;
        }
        document.querySelectorAll('.product-card').forEach(card => {
            const addButton = card.querySelector('button');
            if (!addButton.classList.contains('cursor-not-allowed')) {
                addButton.addEventListener('click', function() {
                    const productName = card.querySelector('h3').textContent;
                    const productPrice = parseInt(card.querySelector('p.font-bold').textContent.replace(/Rp |\./g, ''));
                    addToReceipt(productName, productPrice);
                });
            }
        });
        document.getElementById('bayar').addEventListener('input', calculateChange);
    </script>
</body>
</html>
